# Show what happens with regions

pragma_disable_implicit_freezing()

# setup
MyClass = "[MyClass]"
mermaid_hide(MyClass["__proto__"])
def new(self):
    obj = {}
    obj["__proto__"] = self
    return obj
MyClass.new = move new

# Create a thread 1 with a region
t1 = "Thread 1"
t1.data = Region()
t1.data.obj_1 = MyClass.new()

# Create a thread 2 with a region
t2 = "Thread 2"
t2.data = Region()

# Create a new `MyClass` object that's in the local region
obj_2 = MyClass.new()

MyClass = None

breakpoint()

# Moving `obj_2` will result in an error due to the attempt
# to share access to `MyClass`
t2.data.obj_2 = obj_2

# By commenting out line 3, we can run this with implicit freezing
